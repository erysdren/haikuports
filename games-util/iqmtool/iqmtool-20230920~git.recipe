SUMMARY="Advanced Inter-Quake Model compiler"
DESCRIPTION="A small utility for converting 3D models to various Quake-related formats, \
primarily the Inter-Quake Model format (IQM)."
HOMEPAGE="https://github.com/fte-team/fteqw"
COPYRIGHT="2002-2023 Forethought Entertainment"
LICENSE="GNU GPL v2"
REVISION="1"
srcGitRev="eb6b127d9ce10949f00bcad8c5953b7092c92d12"
SOURCE_URI="https://github.com/fte-team/fteqw/archive/$srcGitRev.tar.gz"
CHECKSUM_SHA256="8d19bf1ca4816d0fb35fda7401ef28b7ca02391ca14ca10843f22d64845d1614"
SOURCE_DIR="fteqw-$srcGitRev"

ARCHITECTURES="all !x86_gcc2"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	iqmtool$secondaryArchSuffix = $portVersion
	cmd:iqmtool$secondaryArchSuffix = $portVersion
	"
REQUIRES="
	haiku$secondaryArchSuffix
	lib:libz$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	devel:libz$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	cmd:gcc$secondaryArchSuffix
	cmd:ld$secondaryArchSuffix
	cmd:pkg_config$secondaryArchSuffix
	cmd:make
	"

BUILD()
{
	cd $sourceDir/engine/
	make $jobArgs iqmtool-rel PKGCONFIG=pkg-config BASELDFLAGS="-lpthread" -f Makefile
}

INSTALL()
{
	mkdir -p $binDir
	cp -r $sourceDir/engine/release/iqmtool $binDir/
}
